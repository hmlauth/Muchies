<h2>Not Devoured</h2>
<ul>
  {{#each burgers}}
    {{#unless devoured}}
        <div>
            <p>{{id}}. {{burger_name}}</p>
            <button class="devour-status" data-id="{{id}}" data-newDevour="true">
                Devour it!
            </button>
        </div> 
    {{/unless}}
  {{/each}}
</ul>

<h2>Devoured</h2>

<ul>
  {{#each burgers}}
    {{#if devoured}}
        <div>
            <p>{{id}}. {{burger_name}}</p>
        </div> 
    {{/if}}
  {{/each}}
</ul>

<h2>Place an order:</h2>
<form id="addburger" class="create-form">

  <div class="form-group">
    <label for="bgr">Burger Name</label>
    <input type="text" id="burger-name" name="name">
  </div>

  <button type="submit">Submit Order</button>
</form>

<script>

    // Obtain user input and update database
    $("#addburger").on("submit", function(event) {
        console.log("Order submitted")
        event.preventDefault();
        
        var newBurger = {
            burger_name: $("#burger-name").val().trim(),
        };
       
        $.ajax("/api/burgers", {
            type: "POST",
            data: newBurger
        }).then(
            function() {
                console.log("Added a new burger");
                location.reload();
            }
        );
    });

    // on click of button with .devour-status, change devour status to eaten
    $(".devour-status").on("click", function(event) {
        var id = $(this).data("id");
        var newDevour = $(this).attr("data-newDevour");

        var newDevourStatus = {
            devoured: newDevour
        };

        console.log(id);
        console.log(newDevourStatus);
        console.log(newDevourStatus.devoured);

        $.ajax("/api/burgers/" + id, {
            type: "PUT",
            data: newDevourStatus
        }).then(
            function() {
                console.log("Burger devoured!");
                location.reload();
            }
        );
    });

</script>
